---
layout:     post
title:      "codecombat上帝模式-不止于python"
subtitle:   
date:       2021-05-13
author:     不止于python
thumbnail:  /images/default-post-thumbnail.png
catalog: true
categories: Cnblogs
original_url: https://www.cnblogs.com/mswei/p/14765692.html
tags:
    - Cnblogs
---

## **不止于python**

　　转自 「 [不止于python](https://mp.weixin.qq.com/s/oyh-9bVN94BF9aBMSBGmlA) 」

## 更新镜像

在第一篇文章中, 最后一步为设置 上帝模式和管理员

但是小伙伴发现启动后, 在设置页面并没有发现这两个选项

今天更新了codecombat镜像, 顺便来说一下怎么开启这两个选项

镜像更新内容

　　1. 自带数据库文件(不需要在导入了)

　　2. 加了启动脚本并解决了nohup启动警告

镜像安装流程(只适用于本篇文章)

1. 下载镜像

公众号后台回复:

**codecombatV2**

![](/images/b55e5a7a/1.png)

2. 导入镜像

```
docker import codecombat_v2.img codecombat_v2
```

![](/images/b55e5a7a/2.png)

3. 启动容器

```
docker run -itd --name codecombat_v2 -p 3000:3000 codecombat_v2:latest /bin/bash
```

![](/images/b55e5a7a/3.png)

 4. 进入容器

```
docker exec -it codecombat_v2 /bin/bash
```

![](/images/b55e5a7a/4.png)

5. 启动服务

　　包括mongo和codecombat服务

```
sh automatic_start.sh
```

![](/images/b55e5a7a/5.png)

## 打开浏览器

等待数秒后, 打开浏览器访问页面

　　http://127.0.0.1:3000

出现页面, 则服务启动成功

## 注册独立账号

![](/images/b55e5a7a/6.png)

这时候在我的账号页面只有这几个选项

![](/images/b55e5a7a/7.png)

而在游戏页面也都没有解锁

![](/images/b55e5a7a/8.png)

## 开启上帝模式和管理员

接下来就是见证奇迹的时候

在容器内执行

```
# 进入mongo  
mongo  
# 切换到coco database
use coco  
# admin为要设置的名字
db.users.update({'name':'admin'},{$set:{'earned.gems':100, permissions:["godmode","admin"]}},true,false);
```

* earned.gems: 宝石💎数量，用以兑换装备
permissions: 权限

+ godmode: 上帝模式
  - 可以打开所有关卡(上帝模式)，并永久订阅（不需要再订阅）
+ admin: 管理员
  - 权限成为系统管理员，可以访问 /admin 页面

![](/images/b55e5a7a/9.png)

再次回到浏览器刷新页面

我的账户下多了管理这个选项, 这个时候已经开启了管理员和上帝模式了

![](/images/b55e5a7a/10.png)

再看一下游戏页面已经全部解锁, 下面的钻石也多了哦!

![](/images/b55e5a7a/11.png)

## PS

已经按照前两个流程安装成功的用户, 只需要执行更新数据库的操作, 即可开启上帝模式和管理员

到这里应该就没什么问题了