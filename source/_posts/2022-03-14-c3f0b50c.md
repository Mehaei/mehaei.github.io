---
layout:     post
title:      "某车之家字体反爬最终版-不止于python"
subtitle:   
date:       2022-03-14
author:     不止于python
thumbnail:  /images/default-post-thumbnail.png
catalog: true
categories: Cnblogs
original_url: https://www.cnblogs.com/mswei/p/16005022.html
tags:
    - Cnblogs
---

 

![](/images/c3f0b50c/1.png)

 

      前几个版本的代码, 虽然都可以解决问题, 但是有点麻烦, 如果是很多个文字, 也不能一个一个手敲上去, 更不能保证字体的顺序不变, 这次使用**pillow**+ **ddddocr**来彻底解决这个问题

思路和过程在前几篇已经写过了, 有什么不明白的, 先看一下前几篇, 链接放在了最下面,  源码也在最下面

首先获取字体文件unicode\_map, 取出字体的ascii值和字形的名称

![](/images/c3f0b50c/2.png)

然后使用**pillow**的 ImageFont 和 **ImageDraw,**将字体转为图片, 尽量将字放在中间, 切在周围留有空白, 这样可以提高准确率

![](/images/c3f0b50c/3.png)

最后使用**ddddocr**来识别图片文字, 准确率非常高

![](/images/c3f0b50c/4.png)

将ttf文件字体转为图片如下, 可以人工对比一下是否正确

![](/images/c3f0b50c/5.png)

最后完善一下代码, 可以保存图片, 验证结果, 如果不存在字体文件会先下载, 然后再识别, 可以完美解决这个字体反爬, 其它网站相关的字体反爬, 也可以使用

![](/images/c3f0b50c/6.png)

完整代码后台回复 **font\_ddddocr\_spider** 获取

参考

---

https://blog.csdn.net/zjq592767809/article/details/122426907  
https://blog.csdn.net/weixin\_45304329/article/details/122408336

https://github.com/sml2h3/ddddocr  
https://pillow.readthedocs.io/en/stable/reference/ImageFont.html

![](/images/c3f0b50c/7.png)相关阅读

* [某车之家字体反爬一(单页面)](http://mp.weixin.qq.com/s?__biz=MzUyMzk3OTYyMQ==&mid=2247483799&idx=1&sn=88f17e85141f60094afa93220685020a&chksm=fa351f9dcd42968b10be512341358940ebe29dc650566edd0866595c03f0d7ee8f0dd939a391&scene=21#wechat_redirect)
* [某车之家字体反爬一(任意页面)](http://mp.weixin.qq.com/s?__biz=MzUyMzk3OTYyMQ==&mid=2247483801&idx=1&sn=9c3599ccbeeb888f9707bf5d1599ccb7&chksm=fa351f93cd429685bf08146e059d0b6896f2cf5bfbf3cbd31a662cd32ae1cfc18bbb0a05dbb4&scene=21#wechat_redirect)
* [某车之家字体反爬升级](http://mp.weixin.qq.com/s?__biz=MzUyMzk3OTYyMQ==&mid=2247484433&idx=1&sn=33da64d6f07d955805370d17f98d144d&chksm=fa351a1bcd42930ddb63c11c42d468cc892fcd82a3b46c99775275197ca92a6c58a4f867924f&scene=21#wechat_redirect)

文章来源于公众号:[某车之家字体反爬](https://mp.weixin.qq.com/s/DUh0subpBbInDxBuz3PdxA)