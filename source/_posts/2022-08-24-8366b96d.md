---
layout:     post
title:      "pyppeteer_stealth隐藏pyppeteer特征天花板神器-不止于python"
subtitle:   
date:       2022-08-24
author:     不止于python
thumbnail:  /images/default-post-thumbnail.png
catalog: true
categories: Cnblogs
original_url: https://www.cnblogs.com/mswei/articles/16619208.html
tags:
    - Cnblogs
---

\*\*主角登场\*\*
> https://github.com/MeiK2333/pyppeteer\\_stealth
第一眼看也能猜出来是干啥的, 就是用来隐藏pyppeteer特征的, 话不多说, 直接开干, 来测一下就知道它的神奇之处了
\*\*安装\*\*
```
pip install pyppeteer\_stealth
```
\*\*使用\*\*
```
import asyncio
from pyppeteer import launch
from pyppeteer\_stealth import stealth
async def main():
browser = await launch(headless=True)
page = await browser.newPage()
    ###
await stealth(page) # <-- Here
    ###
await page.goto("https://bot.sannysoft.com/")
await browser.close()
asyncio.get\_event\_loop().run\_until\_complete(main())
```
\*\*参数\*\*
```
stealth(
page: Page,
run\_on\_insecure\_origins: bool = False,
languages: [str] = ["en-US", "en"],
vendor: str = "Google Inc."
user\_agent: str = None,
locale: str = "en-US,en",
mask\_linux: bool = True,
webgl\_vendor: str = "Intel Inc.",
renderer: str = "Intel Iris OpenGL Engine",
disabled\_evasions: list = [],
)
```
禁止隐藏的特征disabled\\_evasions , 支持隐藏的参数
```
['chrome\_app',
'chrome\_runtime',
'iframe\_content\_window',
'media\_codecs',
'sourceurl',
'navigator\_hardware\_concurrency',
'navigator\_languages',
'navigator\_permissions',
'navigator\_plugins',
'navigator\_vendor',
'navigator\_webdriver',
'user\_agent\_override',
'webgl\_vendor',
'window\_outerdimensions']
```
\*\*使用之前\*\*
无头模式 vs 正常显示页面
![图片](https://mmbiz.qpic.cn/mmbiz\_jpg/EdSjTL0lgFfv3dAjicgm5k8upibbpDy6B2PpguJefdw4uG35jmdk54FeCGmAxj1NwFIwnSHiaJUODeAfANIER5BwA/640?wx\_fmt=jpeg)
\*\*使用之后\*\*
![图片](https://mmbiz.qpic.cn/mmbiz\_jpg/EdSjTL0lgFfv3dAjicgm5k8upibbpDy6B26qrto4OP6aen2ibcux7BI2URqRlbGicGdbtCptRbkuPoLjwTDYIw8YBw/640?wx\_fmt=jpeg)
原图在项目里, 虽然看不清, 但是可以看到使用之后无头浏览器比正常运行的还像 ·真浏览器·, 😂, 有兴趣的可以试一试
![图片](https://mmbiz.qpic.cn/mmbiz\_png/EdSjTL0lgFd3acKQX71kacneyicO0CrYNic2xQvUJtUhZlhlCv2WdpUhA2quTBpianyPI4MsiaswbuZFACI2aKic4aA/640?wx\_fmt=png)