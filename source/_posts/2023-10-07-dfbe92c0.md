---
layout:     post
title:      "使用Crontab：在Linux中自动化任务调度的完全指南"
subtitle:   
date:       2023-10-07
author:     胖胖很瘦
thumbnail:  /images/dfbe92c0/thumbnail.png
catalog: true
categories: linux
original_url: https://mp.weixin.qq.com/s/nhQAOcpOVKQl79PriWE4xg
tags:
    - crontab
    - 自动化
    - linux
---
![](/images/dfbe92c0/1.png)

## Crontab 介绍

当你需要在Linux系统中定时执行任务时，`crontab`是一个强大的工具。它允许你按照指定的时间表自动运行命令、脚本和任务。本文将介绍`crontab`的基本用法，包括字段含义和一些常见示例。

## Crontab 字段含义

`crontab`使用五个字段来定义计划任务的执行时间。这五个字段分别表示分钟、小时、日期、月份和星期几。每个字段都可以包含一个数字或一组数字，用来指定计划任务的执行时间。字段的含义如下：

1. **分钟（0-59）**：表示一小时内的哪一分钟执行任务。
2. **小时（0-23）**：表示一天内的哪个小时执行任务。
3. **日期（1-31）**：表示一个月内的哪一天执行任务。
4. **月份（1-12）**：表示一年中的哪个月执行任务。
5. **星期几（0-7，其中0和7都表示星期天）**：表示一周中的哪一天执行任务。

字段还可以包含特殊字符：

* `*`：表示匹配所有可能的值。例如，`*`在分钟字段中表示每分钟都执行。
* `,`：用于指定多个值。例如，`1,3,5`表示匹配1、3和5。
* `-`：用于指定一个范围。例如，`2-4`表示匹配2、3和4。
* `/`：用于指定一个间隔。例如，`*/2`表示每隔2个单位匹配一次。在分钟字段中，`*/2`表示每2分钟一次。

## Crontab 基本用法

要编辑你的用户crontab，可以运行以下命令：

```
crontab -e
```

然后，你可以在编辑器中添加你的计划任务。每行代表一个任务，格式如下：

```
* * * * * /path/to/your/command
```

* 第一个`*`表示分钟。
* 第二个`*`表示小时。
* 第三个`*`表示日期。
* 第四个`*`表示月份。
* 第五个`*`表示星期几。
* `/path/to/your/command`是要执行的命令或脚本的路径。

## 常用示例

### 示例 1：每天凌晨3点运行备份脚本

```
0 3 * * * /path/to/backup-script.sh
```

### 示例 2：每小时执行一次清理临时文件

```
0 * * * * /path/to/cleanup.sh
```

### 示例 3：每周一早上6点30分发送周报邮件

```
30 6 * * 1 /path/to/send-weekly-report.sh
```

### 示例 4：每月1号的午夜执行系统更新

```
0 0 1 * * /usr/bin/apt-get update && /usr/bin/apt-get upgrade -y
```

### 示例 5：每隔30分钟执行一次任务

要在每小时的第0分钟和第30分钟执行任务，可以使用以下设置：

```
0,30 * * * * /path/to/your/command
```

![](/images/dfbe92c0/2.png)

### 示例 6：每隔5小时执行一次任务

要在每天的0点、5点、10点、15点、20点执行任务，可以使用以下设置：

```
0 */5 * * * /path/to/your/command
```

### 示例 7：每隔3天执行一次任务

要在每3天的0点执行任务，可以使用以下设置：

```
0 0 */3 * * /path/to/your/command
```

### 示例 8：每月的1号和15号执行任务

要在每个月的1号和15号的凌晨执行任务，可以使用以下设置：

```
0 0 1,15 * * /path/to/your/command
```

### 示例 9：每周一、三、五的上午10点和下午3点执行任务

要在每周一、三、五的上午10点和下午3点执行任务，可以使用以下设置：

```
0 10,15 * * 1,3,5 /path/to/your/command
```

### 示例 10：每小时的第15分钟执行任务，但在周末不执行

要在工作日的每个小时的第15分钟执行任务，但在周六和周日不执行，可以使用以下设置：

```
15 * * * 1-5 /path/to/your/command
```

这些示例展示了如何使用`crontab`的字段和特殊字符来创建更复杂和精确的定时任务。你可以根据自己的需求进行调整，并根据需要添加更多的任务。要测试你的`crontab`设置是否正确，可以使用`crontab -l`命令查看你当前的计划任务列表。

## 保存并退出

完成编辑后，保存并退出文本编辑器。`crontab`将自动加载你的新计划任务。

你还可以使用以下命令列出、编辑或删除你的crontab：

* 列出当前的crontab：

```
crontab -l
```

‍

* 编辑当前的crontab：

```
crontab -e
```

* 删除当前的crontab：

```
crontab -r
```

### 

![](/images/dfbe92c0/3.png)
