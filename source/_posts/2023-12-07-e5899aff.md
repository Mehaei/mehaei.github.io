---
layout:     post
title:      "常用自动化操作模块特征隐藏（附源码和js文件）"
subtitle:   
date:       2023-12-07
author:     胖胖很瘦
thumbnail:  /images/e5899aff/thumbnail.png
catalog: true
categories: #爬虫之路
original_url: https://mp.weixin.qq.com/s/q66XCApasYjqS8k5wlXsFg
tags:
    - #爬虫之路
    - 自动化
    - python高级
---

#### 

![](/images/e5899aff/1.png)

#### 

#### **前言**

爬虫的路上总有我们这些小白解不了的密， 反不了的爬。这时候就需要自动化工具了， 但是一般情况下， 直接使用自动化工具都会被目标网站监测到， 因为有几十个特征会被暴露的特征。所以这篇文章写一下， 常见的浏览器如何执行js， 和隐藏浏览器特征。文章不会涉及到配安装和配置环境步骤。自行查教程

#### **selemium**

> 最早接触的自动化模块

```
# -*- coding: utf-8 -*-  
# @Author: Mehaei  
# @Date: 2023-12-07 19:58:47  
# @Last Modified by: Mehaei  
# @Last Modified time: 2023-12-07 21:03:31  
import time  
from selenium import webdriver  
  
  
def start():  
    driver = webdriver.Chrome()  
    with open('stealth.min.js', 'r') as f:  
        js = f.read()  
    driver.execute_cdp_cmd('Page.addScriptToEvaluateOnNewDocument', {'source': js})  
    driver.get("https://bot.sannysoft.com/")  
    time.sleep(60)  
  
  
if __name__ == '__main__':  
    start()
```

#### **pyppeteer**

> 实测还是会有少部分特征会无法隐藏, 不过还有其它办法
>
> [pyppeteer\_stealth隐藏pyppeteer特征天花板神器](http://mp.weixin.qq.com/s?__biz=MzUyMzk3OTYyMQ==&mid=2247487004&idx=1&sn=dd28d6f6bd8e06c2e950a4ced84f9e8c&chksm=fa351016cd4299000bd0ad263bfc0e7cc4915575d424340e9283184872fed4d25369ac6c5675&scene=21#wechat_redirect)

```
# -*- coding: utf-8 -*-  
# @Author: Mehaei  
# @Date: 2023-12-07 19:58:47  
# @Last Modified by: Mehaei  
# @Last Modified time: 2023-12-07 21:22:31  
import asyncio  
from pyppeteer import launch  
  
  
async def start():  
    browser = await launch(headless=False)  
    page = await browser.newPage()  
    with open('stealth.min.js', 'r') as f:  
        js = f.read()  
    await page.evaluateOnNewDocument(js)  
    await page.goto("https://bot.sannysoft.com/")  
    await asyncio.sleep(60)  
  
  
if __name__ == '__main__':  
    asyncio.get_event_loop().run_until_complete(start())
```

![](/images/e5899aff/2.png)

#### **playwright**

> 新一代爬虫工具
>
> 可以录制手动的操作， 自动生成代码。自动化神器

> 官网
>
> https://playwright.dev/

```
# -*- coding: utf-8 -*-  
# @Author: Mehaei  
# @Date: 2023-12-07 19:58:47  
# @Last Modified by: Mehaei  
# @Last Modified time: 2023-12-07 20:52:55  
import time  
from playwright.sync_api import sync_playwright  
  
  
def start():  
    with sync_playwright() as p:  
        browser = p.chromium.launch(headless=False)  
        context = browser.new_context()  
        context.add_init_script(path='stealth.min.js')  
        page = context.new_page()  
        page.goto("https://bot.sannysoft.com/", timeout=100000)  
        time.sleep(60)  
  
  
if __name__ == '__main__':  
    start()
```

#### 

#### **DrissionPage**

> 新的自动化工具, 同时兼容requests便利性和自动化工具的强大行
>
> 且会自动隐藏掉一些自动化特征和无需安装驱动， 感兴趣的可以看官网

> https://g1879.gitee.io/drissionpagedocs/

```
# -*- coding: utf-8 -*-  
# @Author: Mehaei  
# @Date: 2023-12-07 19:58:47  
# @Last Modified by: Mehaei  
# @Last Modified time: 2023-12-07 22:02:58  
import time  
from DrissionPage import ChromiumPage  
  
  
def start():  
    page = ChromiumPage()  
    with open('stealth.min.js', 'r') as f:  
        js = f.read()  
    """  
    运行js, 但是运行这个stealth脚本会报错  
    """  
    # page.run_js(js)  
    page.get("https://bot.sannysoft.com/")  
    time.sleep(60)  
  
  
if __name__ == '__main__':  
    start()
```

#### **js文件下载地址**

python常用的自动化工具就这些，到这里就完了， 这篇其实也没写啥， 就是一点点简单的例子， 记录一下

关注 【 不止于python 】公众号， 后台回复 【 **stealth\_js** 】获取

一直在努力, 记得点个在看哦!