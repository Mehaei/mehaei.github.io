---
layout:     post
title:      "Python glob 模块全解析：轻松处理文件路径匹配"
subtitle:   
date:       2025-03-06
author:     胖胖很瘦
thumbnail:  /images/20a0a3aa/thumbnail.png
catalog: true
categories: python模块集合
original_url: https://mp.weixin.qq.com/s/X71e24q3VoVu6ZCHoIVXgA
tags:
    - python模块集合
---

## 上课

在 Python 中，**`glob` 模块** 主要用于 **查找符合特定规则的文件路径**，它支持使用通配符（如 `*`、`?` 和 `[]`）来进行灵活的文件搜索。相比于 `os.listdir()`，`glob` 更适合按模式匹配文件，非常适用于批量处理文件。

在这篇文章中，我们将详细讲解 `glob` 模块的用法，并提供多个示例，帮助你在实际开发中轻松使用它！

---

## `glob` 模块的基础用法

### **`glob.glob()`：获取匹配的文件路径列表**

`glob.glob(pattern, recursive=False)` 用于查找所有符合 `pattern` 规则的文件，并返回一个**文件路径列表**。

* `pattern`：搜索的文件模式，如 `"*.txt"` 代表所有 `.txt` 文件。
* `recursive`：是否递归搜索子目录（默认 `False`，即只匹配当前目录）。

#### **示例：匹配当前目录下的所有 `.txt` 文件**

```
import glob  
  
files = glob.glob("*.txt")  # 匹配当前目录下所有 .txt 文件  
print(files)
```

**输出示例**：

```
['test1.txt', 'notes.txt', 'data.txt']
```

---

### **`glob.glob()` 递归匹配子目录**

如果想要在所有子目录中查找 `.txt` 文件，需要将 `recursive=True` 并使用 `**` 通配符：

```
files = glob.glob("**/*.txt", recursive=True)  
print(files)
```

这个方法可以搜索**当前目录及其所有子目录**的 `.txt` 文件，非常适合查找多个层级的文件。

---

## `glob.iglob()`：高效的迭代器方式

`glob.iglob(pattern, recursive=False)` 与 `glob.glob()` 类似，但它不会一次性返回**整个列表**，而是返回一个**迭代器**，在需要时才生成文件名，节省内存。

### **示例：使用 `iglob()` 遍历匹配的文件**

```
for file in glob.iglob("*.txt"):  
    print(file)
```

如果你需要处理**大量文件**，建议使用 `iglob()`，避免占用过多内存。

![](/images/20a0a3aa/1.png)

---

## 通配符规则

| 通配符 | 含义 |
| --- | --- |
| `*` | 匹配**任意数量**的字符（包括空字符） |
| `?` | 匹配**任意一个**字符 |
| `[ ]` | 匹配**指定范围内的字符** |

### **示例：使用不同的通配符进行匹配**

```
print(glob.glob("*.py"))     # 匹配当前目录下所有 .py 文件  
print(glob.glob("data?.csv")) # 匹配 data1.csv、data2.csv，但不匹配 data10.csv  
print(glob.glob("[a-c]*.txt")) # 匹配以 a、b 或 c 开头的 .txt 文件
```

---

## `pathlib` vs `glob`

如果你使用的是 `pathlib`，也可以使用 `Path.glob()` 方法，它的功能与 `glob.glob()` 类似，但更符合面向对象的风格：

```
from pathlib import Path  
  
path = Path(".")  
files = list(path.glob("*.txt"))  # 获取所有 .txt 文件  
print(files)
```

对于递归匹配，可以使用 `rglob()` 方法：

```
files = list(path.rglob("*.txt"))  # 在所有子目录中查找 .txt 文件  
print(files)
```

---

## `glob` 的实际应用案例

### **批量重命名文件**

如果你有多个 `.jpg` 图片需要改名，可以结合 `os.rename()` 和 `glob` 进行批量处理：

```
import glob  
import os  
  
for idx, file in enumerate(glob.glob("images/*.jpg")):  
    new_name = f"images/image_{idx}.jpg"  
    os.rename(file, new_name)  
    print(f"重命名 {file} -> {new_name}")
```

---

### **统计某类型文件的数量**

如果你需要统计 `.log` 日志文件的数量，可以这样做：

```
log_files = glob.glob("logs/*.log")  
print(f"日志文件数量：{len(log_files)}")
```

---

### **读取多个 CSV 文件并合并**

如果你有多个 CSV 文件需要合并成一个 Pandas 数据框，可以使用 `glob` 进行匹配：

```
import pandas as pd  
  
csv_files = glob.glob("data/*.csv")  
df_list = [pd.read_csv(file) for file in csv_files]  # 读取所有 CSV  
df = pd.concat(df_list, ignore_index=True)  # 合并  
print(df.head())
```

---

## `glob` vs `os.listdir()`

| 方法 | 适用场景 | 是否支持通配符 | 是否支持递归 |
| --- | --- | --- | --- |
| `os.listdir()` | 获取目录下所有文件 | ❌ | ❌ |
| `glob.glob()` | 按模式匹配文件 | ✅ | ✅（使用 `recursive=True`） |
| `pathlib.Path.glob()` | 现代方式的文件匹配 | ✅ | ✅（使用 `rglob()`） |

如果只想获取**所有文件**，`os.listdir()` 可能更简单；但如果需要**按规则匹配**，`glob` 更合适！

---

## 下课

🔹 **`glob` 是一个强大的文件路径匹配工具**，支持 `*`、`?` 等通配符，能快速找到符合条件的文件。  
🔹 **`glob.glob()` 适合一次性获取文件列表**，`glob.iglob()` 则更节省内存。  
🔹 **`pathlib` 也提供了 `glob()` 和 `rglob()`**，更加符合现代 Python 风格。  
🔹 `glob` 在**批量重命名、文件统计、数据处理**等任务中非常有用！

希望这篇文章能帮你更好地理解和使用 `glob`！如果觉得有用，欢迎点赞、转发或关注公众号获取更多 Python 技巧！🚀🚀🚀

## 最新文章

* [极致优化：Python 实战教你高效转换 FITS 图像并精确标注坐标](https://mp.weixin.qq.com/s?__biz=MzUyMzk3OTYyMQ==&mid=2247488635&idx=1&sn=e02ab9d107f0811008b7c87293d7ce77&scene=21#wechat_redirect "极致优化：Python 实战教你高效转换 FITS 图像并精确标注坐标")
* [Python生成小数序列竟如此简单！np.arange为何碾压range？一文彻底讲透](https://mp.weixin.qq.com/s?__biz=MzUyMzk3OTYyMQ==&mid=2247488629&idx=1&sn=8ee89f2993ce84df242b0554ee5ccc9e&scene=21#wechat_redirect "Python生成小数序列竟如此简单！np.arange为何碾压range？一文彻底讲透")
* [知识点之endl的作用](https://mp.weixin.qq.com/s?__biz=MzUyMzk3OTYyMQ==&mid=2247488624&idx=1&sn=48fa138c5a7491822802b0ffa3d156bb&scene=21#wechat_redirect "知识点之endl的作用")
* [从 Python 到 C++：第一步——基础语法结构与数据类型对比学习](https://mp.weixin.qq.com/s?__biz=MzUyMzk3OTYyMQ==&mid=2247488623&idx=1&sn=ec452bf2eb56daee9f30652d476b2028&scene=21#wechat_redirect "从 Python 到 C++：第一步——基础语法结构与数据类型对比学习")
* [轨道六根数：揭示天体轨道的关键参数](https://mp.weixin.qq.com/s?__biz=MzUyMzk3OTYyMQ==&mid=2247488621&idx=1&sn=a25d0917b6f69f9a66d5deb796d38148&scene=21#wechat_redirect "轨道六根数：揭示天体轨道的关键参数")